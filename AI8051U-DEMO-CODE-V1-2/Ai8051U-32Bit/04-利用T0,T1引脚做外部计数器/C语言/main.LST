C251 COMPILER V5.60.0,  main                                                               16/04/25  22:58:16  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE main.c XSMALL INTR2 BROWSE DEBUG TABS(2) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* --- Web: www.STCAI.com ---------------------------------------------*/
    3          /*---------------------------------------------------------------------*/
    4          
    5          /*************  功能说明    **************
    6          
    7          本例程基于AI8051U为主控芯片的实验箱进行编写测试.
    8          
    9          使用Keil C251编译器，Memory Model推荐设置XSmall模式，默认定义变量在edata，单时钟存取访问速度快。
   10          
   11          edata建议保留1K给堆栈使用，空间不够时可将大数组、不常用变量加xdata关键字定义到xdata空间。
   12          
   13          每触发一次T0中断, LED10产生一次翻转；每触发一次T1中断, LED11产生一次翻转.
   14          
   15          由于按键是机械按键, 按下有抖动, 而本例程没有去抖动处理, 所以按一次产生多次中断也是正常的.
   16          
   17          下载时, 选择时钟 24MHZ (用户可自行修改频率).
   18          
   19          ******************************************/
   20          
   21          #include "..\..\comm\AI8051U.h"
   22          #include "intrins.h"
   23          
   24          typedef     unsigned char    u8;
   25          typedef     unsigned int    u16;
   26          typedef     unsigned long    u32;
   27          
   28          //==========================================================================
   29          
   30          #define MAIN_Fosc       24000000UL
   31          
   32          /*************  本地变量声明    **************/
   33          
   34          
   35          /*************  本地函数声明    **************/
   36          
   37          
   38          /****************  外部函数声明和外部变量声明 *****************/
   39          
   40          
   41          //========================================================================
   42          // 函数: void timer0_int (void) interrupt TIMER0_VECTOR
   43          // 描述: timer0中断函数.
   44          // 参数: none.
   45          // 返回: none.
   46          // 版本: V1.0, 2015-1-12
   47          //========================================================================
   48          void TM0_Isr() interrupt 1
   49          {
   50   1          P43 = !P43;  //测试端口
   51   1      }
   52          
   53          //========================================================================
   54          // 函数: void timer1_int (void) interrupt TIMER1_VECTOR
   55          // 描述: timer1中断函数.
   56          // 参数: none.
   57          // 返回: none.
   58          // 版本: V1.0, 2015-1-12
   59          //========================================================================
C251 COMPILER V5.60.0,  main                                                               16/04/25  22:58:16  PAGE 2   

   60          void TM1_Isr (void) interrupt 3
   61          {
   62   1          P42 = !P42;  //测试端口
   63   1      }
   64          
   65          /******************** 主函数 **************************/
   66          void main(void)
   67          {
   68   1          WTST = 0;  //设置程序指令延时参数，赋值为0可将CPU执行指令的速度设置为最快
   69   1          EAXFR = 1; //扩展寄存器(XFR)访问使能
   70   1          CKCON = 0; //提高访问XRAM速度
   71   1      
   72   1          P0M1 = 0x00;   P0M0 = 0x00;   //设置为准双向口
   73   1          P1M1 = 0x00;   P1M0 = 0x00;   //设置为准双向口
   74   1          P2M1 = 0x00;   P2M0 = 0x00;   //设置为准双向口
   75   1          P3M1 = 0x30;   P3M0 = 0x00;   //设置为准双向口, P3.4,P3.5高阻输入
   76   1          P4M1 = 0x00;   P4M0 = 0x00;   //设置为准双向口
   77   1          P5M1 = 0x00;   P5M0 = 0x00;   //设置为准双向口
   78   1          P6M1 = 0x00;   P6M0 = 0x00;   //设置为准双向口
   79   1          P7M1 = 0x00;   P7M0 = 0x00;   //设置为准双向口
   80   1      
   81   1          P3PU = 0x30;            //P3.4,P3.5使能内部4.1K上拉电阻
   82   1          
   83   1          TMOD = 0;
   84   1          T0_CT = 1;              //使能T0外部计数模式
   85   1          T1_CT = 1;              //使能T1外部计数模式
   86   1          TL0 = 0xff;
   87   1          TH0 = 0xff;
   88   1          TL1 = 0xff;
   89   1          TH1 = 0xff;
   90   1          TR0 = 1;                //启动定时器T0
   91   1          TR1 = 1;                //启动定时器T1
   92   1          ET0 = 1;                //使能定时器中断T0
   93   1          ET1 = 1;                //使能定时器中断T1
   94   1      
   95   1          T0CLKO = 0;             //T0不输出时钟
   96   1          T1CLKO = 0;             //T1不输出时钟
   97   1      
   98   1          EA = 1;
   99   1      
  100   1          while(1);
  101   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       143     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
