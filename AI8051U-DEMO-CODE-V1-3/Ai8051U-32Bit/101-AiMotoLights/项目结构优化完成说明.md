# é¡¹ç›®ç»“æ„ä¼˜åŒ–å®Œæˆè¯´æ˜

## âœ… ä¼˜åŒ–å®Œæˆæƒ…å†µ

### å·²å®Œæˆçš„å·¥ä½œ

#### 1. âœ… åˆ›å»ºæ¨¡å—åŒ–ç›®å½•ç»“æ„
- åˆ›å»º `Sources/inc/moto_lights/` ç›®å½•
- åˆ›å»º `Sources/src/moto_lights/` ç›®å½•
- åˆ›å»º `Sources/inc/legacy/` ç›®å½•
- åˆ›å»º `Sources/src/legacy/` ç›®å½•

#### 2. âœ… ç§»åŠ¨æ‘©æ‰˜è½¦ç¯ç»„æ¨¡å—æ–‡ä»¶
**å¤´æ–‡ä»¶ç§»åŠ¨åˆ° `Sources/inc/moto_lights/`ï¼š**
- `moto_lights_config.h`
- `moto_lights_pinmap.h`
- `app_moto_lights.h`
- `app_vehicle_signal.h`
- `app_ws2812b.h`
- `app_pwm_output.h`
- `app_light_scheduler.h`
- `app_sensors.h`

**æºæ–‡ä»¶ç§»åŠ¨åˆ° `Sources/src/moto_lights/`ï¼š**
- `app_moto_lights.c`
- `app_vehicle_signal.c`
- `app_ws2812b.c`
- `app_pwm_output.c`
- `app_light_scheduler.c`
- `app_sensors.c`

#### 3. âœ… ç§»åŠ¨æ ¹ç›®å½•å¤´æ–‡ä»¶
- `app.h` â†’ `Sources/inc/app.h`
- `Config.h` â†’ `Sources/inc/Config.h`
- `Type_def.h` â†’ `Sources/inc/Type_def.h`

#### 4. âœ… ç§»åŠ¨æœªä½¿ç”¨çš„æ¼”ç¤ºæ–‡ä»¶åˆ°legacyç›®å½•
**å¤´æ–‡ä»¶ç§»åŠ¨åˆ° `Sources/inc/legacy/`ï¼š**
- `app_Display.h`
- `app_MatrixKey.h`
- `app_adcKey.h`
- `app_ntc.h`
- `app_rtc.h`

**æºæ–‡ä»¶ç§»åŠ¨åˆ° `Sources/src/legacy/`ï¼š**
- `app_Display.c`
- `app_MatrixKey.c`
- `app_adcKey.c`
- `app_ntc.c`
- `app_rtc.c`

#### 5. âœ… æ›´æ–°æ‰€æœ‰åŒ…å«è·¯å¾„
- æ›´æ–° `app.h` ä¸­çš„æ‘©æ‰˜è½¦ç¯ç»„æ¨¡å—åŒ…å«è·¯å¾„
- æ›´æ–°æ‰€æœ‰ `moto_lights/` ç›®å½•ä¸‹æºæ–‡ä»¶çš„åŒ…å«è·¯å¾„
- æ›´æ–°æ‰€æœ‰ `moto_lights/` ç›®å½•ä¸‹å¤´æ–‡ä»¶çš„å†…éƒ¨åŒ…å«è·¯å¾„
- æ›´æ–° `Config.h` ä¸­çš„ AI8051U.h è·¯å¾„
- æ›´æ–° `moto_lights_pinmap.h` ä¸­çš„ AI8051U.h è·¯å¾„
- æ›´æ–° `app.c` ä¸­çš„ USBHID è·¯å¾„

---

## ğŸ“ ä¼˜åŒ–åçš„ç›®å½•ç»“æ„

```
101-AiMotoLights/
â”œâ”€â”€ Sources/
â”‚   â”œâ”€â”€ inc/                          # ç»Ÿä¸€å¤´æ–‡ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ Config.h                 # ç³»ç»Ÿé…ç½®ï¼ˆä»æ ¹ç›®å½•ç§»åŠ¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ Type_def.h               # ç±»å‹å®šä¹‰ï¼ˆä»æ ¹ç›®å½•ç§»åŠ¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ app.h                    # åº”ç”¨å¤´æ–‡ä»¶ï¼ˆä»æ ¹ç›®å½•ç§»åŠ¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ System_init.h
â”‚   â”‚   â”œâ”€â”€ Task.h
â”‚   â”‚   â”œâ”€â”€ adc.h
â”‚   â”‚   â”œâ”€â”€ app_intKey.h             # å¤–éƒ¨ä¸­æ–­æŒ‰é”®ï¼ˆå¿…éœ€ï¼‰
â”‚   â”‚   â”œâ”€â”€ moto_lights/             # æ‘©æ‰˜è½¦ç¯ç»„ç³»ç»Ÿæ¨¡å— â­
â”‚   â”‚   â”‚   â”œâ”€â”€ moto_lights_config.h
â”‚   â”‚   â”‚   â”œâ”€â”€ moto_lights_pinmap.h
â”‚   â”‚   â”‚   â”œâ”€â”€ app_moto_lights.h
â”‚   â”‚   â”‚   â”œâ”€â”€ app_vehicle_signal.h
â”‚   â”‚   â”‚   â”œâ”€â”€ app_ws2812b.h
â”‚   â”‚   â”‚   â”œâ”€â”€ app_pwm_output.h
â”‚   â”‚   â”‚   â”œâ”€â”€ app_light_scheduler.h
â”‚   â”‚   â”‚   â””â”€â”€ app_sensors.h
â”‚   â”‚   â””â”€â”€ legacy/                  # æ—§æ¼”ç¤ºæ¨¡å—ï¼ˆä¿ç•™ä½†ä¸ä½¿ç”¨ï¼‰
â”‚   â”‚       â”œâ”€â”€ app_Display.h
â”‚   â”‚       â”œâ”€â”€ app_MatrixKey.h
â”‚   â”‚       â”œâ”€â”€ app_adcKey.h
â”‚   â”‚       â”œâ”€â”€ app_ntc.h
â”‚   â”‚       â””â”€â”€ app_rtc.h
â”‚   â”œâ”€â”€ src/                          # æºæ–‡ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ main.c
â”‚   â”‚   â”œâ”€â”€ app.c
â”‚   â”‚   â”œâ”€â”€ System_init.c
â”‚   â”‚   â”œâ”€â”€ Task.c
â”‚   â”‚   â”œâ”€â”€ adc.c
â”‚   â”‚   â”œâ”€â”€ app_intKey.c
â”‚   â”‚   â”œâ”€â”€ moto_lights/             # æ‘©æ‰˜è½¦ç¯ç»„ç³»ç»Ÿæºæ–‡ä»¶ â­
â”‚   â”‚   â”‚   â”œâ”€â”€ app_moto_lights.c
â”‚   â”‚   â”‚   â”œâ”€â”€ app_vehicle_signal.c
â”‚   â”‚   â”‚   â”œâ”€â”€ app_ws2812b.c
â”‚   â”‚   â”‚   â”œâ”€â”€ app_pwm_output.c
â”‚   â”‚   â”‚   â”œâ”€â”€ app_light_scheduler.c
â”‚   â”‚   â”‚   â””â”€â”€ app_sensors.c
â”‚   â”‚   â””â”€â”€ legacy/                  # æ—§æ¼”ç¤ºæ¨¡å—ï¼ˆä¿ç•™ä½†ä¸ä½¿ç”¨ï¼‰
â”‚   â”‚       â”œâ”€â”€ app_Display.c
â”‚   â”‚       â”œâ”€â”€ app_MatrixKey.c
â”‚   â”‚       â”œâ”€â”€ app_adcKey.c
â”‚   â”‚       â”œâ”€â”€ app_ntc.c
â”‚   â”‚       â””â”€â”€ app_rtc.c
â”‚   â””â”€â”€ isr/                          # ä¸­æ–­æœåŠ¡ç¨‹åº
â”‚       â””â”€â”€ Timer_Isr.c
â”œâ”€â”€ AI8051U/                          # ç¡¬ä»¶é©±åŠ¨ï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ CPUMonitor/                       # CPUç›‘æ§æ’ä»¶ï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ TaskMonitor/                      # ä»»åŠ¡ç›‘æ§æ’ä»¶ï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ StateMachine/                     # çŠ¶æ€æœºå·¥å…·ï¼ˆä¿æŒä¸å˜ï¼‰
â””â”€â”€ ... (å…¶ä»–æ–‡ä»¶)
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. Keil å·¥ç¨‹æ–‡ä»¶éœ€è¦æ›´æ–°

**å¿…é¡»æ“ä½œï¼š**
1. æ‰“å¼€ `sample.uvproj` æ–‡ä»¶
2. ç§»é™¤æ—§çš„æºæ–‡ä»¶è·¯å¾„
3. æ·»åŠ æ–°çš„æºæ–‡ä»¶è·¯å¾„ï¼š
   - `Sources/src/moto_lights/*.c`
4. ç¡®ä¿åŒ…å«è·¯å¾„ï¼ˆInclude Pathsï¼‰åŒ…å«ï¼š
   - `Sources/inc`
   - `Sources/inc/moto_lights`ï¼ˆå¦‚æœéœ€è¦ï¼‰

### 2. åŒ…å«è·¯å¾„è¯´æ˜

**å½“å‰åŒ…å«è·¯å¾„è®¾ç½®ï¼š**
- æ‰€æœ‰æºæ–‡ä»¶ä½¿ç”¨ `#include "config.h"`ï¼ˆå‡è®¾ Keil å·¥ç¨‹å·²è®¾ç½® `Sources/inc` ä¸ºåŒ…å«è·¯å¾„ï¼‰
- æ‘©æ‰˜è½¦ç¯ç»„æ¨¡å—ä½¿ç”¨ `#include "moto_lights/xxx.h"`
- å†…éƒ¨å¤´æ–‡ä»¶ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚ `../type_def.h`ï¼‰

**å¦‚æœç¼–è¯‘å‡ºé”™ï¼Œè¯·æ£€æŸ¥ï¼š**
1. Keil å·¥ç¨‹çš„åŒ…å«è·¯å¾„è®¾ç½®
2. æºæ–‡ä»¶ä¸­çš„ `#include` è·¯å¾„æ˜¯å¦æ­£ç¡®

### 3. Legacy æ–‡ä»¶å¤„ç†

**Legacy ç›®å½•ä¸­çš„æ–‡ä»¶ï¼š**
- âœ… å·²ä¿ç•™ï¼Œæœªåˆ é™¤
- âŒ ä¸åœ¨ Keil å·¥ç¨‹ä¸­ç¼–è¯‘
- ğŸ“ å¦‚éœ€ä½¿ç”¨ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ åˆ°å·¥ç¨‹

---

## ğŸ” è·¯å¾„æ›´æ–°è¯¦æƒ…

### ä¸»è¦åŒ…å«è·¯å¾„å˜æ›´

| åŸè·¯å¾„ | æ–°è·¯å¾„ | è¯´æ˜ |
|--------|--------|------|
| `#include "moto_lights_config.h"` | `#include "moto_lights/moto_lights_config.h"` | app.h ä¸­ |
| `#include "app_ws2812b.h"` | `#include "moto_lights/app_ws2812b.h"` | æºæ–‡ä»¶ä¸­ |
| `#include "type_def.h"` | `#include "../type_def.h"` | moto_lights å¤´æ–‡ä»¶ä¸­ |
| `#include "AI8051U.h"` | `#include "../../../AI8051U/AI8051U.h"` | moto_lights_pinmap.h |
| `#include "../../../AI8051U/AI8051U.h"` | `#include "../../AI8051U/AI8051U.h"` | Config.h |
| `#include "../USBHID/usb.h"` | `#include "../../USBHID/usb.h"` | app.c |

---

## âœ… éªŒè¯æ¸…å•

åœ¨ç¼–è¯‘å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] Keil å·¥ç¨‹æ–‡ä»¶å·²æ›´æ–°ï¼ˆæ·»åŠ  moto_lights ç›®å½•ä¸‹çš„æºæ–‡ä»¶ï¼‰
- [ ] Keil å·¥ç¨‹åŒ…å«è·¯å¾„åŒ…å« `Sources/inc`
- [ ] Legacy æ–‡ä»¶å·²ä»å·¥ç¨‹ä¸­ç§»é™¤ï¼ˆå¦‚æœä¹‹å‰å·²æ·»åŠ ï¼‰
- [ ] æ‰€æœ‰æºæ–‡ä»¶è·¯å¾„æ­£ç¡®
- [ ] æ‰€æœ‰å¤´æ–‡ä»¶è·¯å¾„æ­£ç¡®

---

## ğŸ¯ ä¼˜åŒ–æ•ˆæœ

### ä¼˜åŒ–å‰
- âŒ å¤´æ–‡ä»¶åˆ†æ•£åœ¨æ ¹ç›®å½•å’Œ `Sources/inc/`
- âŒ æ‘©æ‰˜è½¦ç¯ç»„æ¨¡å—æ–‡ä»¶æ··æ‚åœ¨å…¶ä»–æ–‡ä»¶ä¸­
- âŒ æœªä½¿ç”¨çš„æ¼”ç¤ºæ–‡ä»¶å ç”¨ç©ºé—´
- âŒ åŒ…å«è·¯å¾„ä¸ä¸€è‡´

### ä¼˜åŒ–å
- âœ… å¤´æ–‡ä»¶ç»Ÿä¸€åœ¨ `Sources/inc/`
- âœ… æ‘©æ‰˜è½¦ç¯ç»„æ¨¡å—ç‹¬ç«‹åœ¨ `moto_lights/` å­ç›®å½•
- âœ… æœªä½¿ç”¨æ–‡ä»¶é›†ä¸­ç®¡ç†åœ¨ `legacy/` ç›®å½•
- âœ… åŒ…å«è·¯å¾„æ¸…æ™°ä¸€è‡´
- âœ… æ¨¡å—åˆ’åˆ†æ›´æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤

---

## ğŸ“ åç»­å»ºè®®

1. **æµ‹è¯•ç¼–è¯‘**ï¼šæ›´æ–° Keil å·¥ç¨‹åç«‹å³æµ‹è¯•ç¼–è¯‘
2. **åŠŸèƒ½éªŒè¯**ï¼šç¼–è¯‘é€šè¿‡åéªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
3. **æ–‡æ¡£æ›´æ–°**ï¼šå¦‚æœ‰å¿…è¦ï¼Œæ›´æ–°ç›¸å…³æ–‡æ¡£ä¸­çš„è·¯å¾„è¯´æ˜
4. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå¦‚æœä½¿ç”¨ Gitï¼Œå»ºè®®æäº¤æ­¤æ¬¡ä¼˜åŒ–

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´ï¼š** 2025-01-XX  
**ä¼˜åŒ–æ‰§è¡Œäººï¼š** AI Assistant  
**çŠ¶æ€ï¼š** âœ… å®Œæˆï¼ˆéœ€æ›´æ–° Keil å·¥ç¨‹æ–‡ä»¶ï¼‰

