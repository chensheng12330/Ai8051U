#ifndef __TASK_MONITOR_CONFIG_H_
#define __TASK_MONITOR_CONFIG_H_

/*============================================================================*/
/*                    任务监控插件 - 配置文件                                  */
/*============================================================================*/
/* 
 * 说明: 用户根据需求修改此文件
 * 
 * 使用步骤:
 *   1. 根据需求设置监控级别
 *   2. 设置最大任务数
 *   3. 配置超时阈值
 *   4. 选择时间测量方式
 */

//========================================================================
//                          监控级别配置
//========================================================================

// 监控级别（选择其一）
// #define TASK_MONITOR_LEVEL  TASK_MONITOR_OFF    // 完全关闭
// #define TASK_MONITOR_LEVEL  TASK_MONITOR_BASIC  // 基础监控
// #define TASK_MONITOR_LEVEL  TASK_MONITOR_TIME   // 时间监控
// #define TASK_MONITOR_LEVEL  TASK_MONITOR_FULL   // 完整监控

// 自动配置（根据编译模式）
#ifdef DEBUG
    #define TASK_MONITOR_LEVEL  TASK_MONITOR_TIME   // 调试: 详细监控
#else
    #define TASK_MONITOR_LEVEL  TASK_MONITOR_BASIC  // 发布: 基础监控
#endif

//========================================================================
//                          任务数量配置
//========================================================================

#define TASK_MONITOR_MAX_TASKS  10  // 最多监控10个任务

//========================================================================
//                          超时检测配置
//========================================================================

#define TASK_MONITOR_TIMEOUT_THRESHOLD  50  // 50% - 超过周期的50%算超时

#define ENABLE_TIMEOUT_WARNING  0  // 0=关闭预警, 1=启用预警(printf)
                                    // 注意: printf开销大，仅调试时启用

//========================================================================
//                          时间测量配置
//========================================================================

// 时间测量方式（选择其一）
#define TIME_SOURCE_TIMER0  1  // 使用Timer0计数器（推荐）
#define TIME_SOURCE_TIMER2  2  // 使用独立Timer2（更精确，但占用定时器）

#define TASK_MONITOR_TIME_SOURCE  TIME_SOURCE_TIMER0  // 当前使用Timer0

// Timer0配置（需要与项目匹配）
#ifndef MAIN_Fosc
    #define MAIN_Fosc  48000000L  // 系统频率，默认48MHz
#endif

// Timer0重载值（用于计算时间）
#define Timer0_Reload_Value  (MAIN_Fosc / 1000)

//========================================================================
//                          性能优化配置
//========================================================================

// 采样监控（降低开销）
#define ENABLE_SAMPLE_MONITOR  0  // 0=每次监控, 1=采样监控
#define SAMPLE_RATE           10  // 每10次监控1次（仅ENABLE_SAMPLE_MONITOR=1时有效）

//========================================================================
//                          调试输出配置
//========================================================================

// 是否启用调试输出
#define ENABLE_MONITOR_DEBUG  0  // 0=关闭, 1=启用

// 串口输出函数（如果项目有自己的printf）
#ifndef MONITOR_PRINTF
    #include <stdio.h>
    #define MONITOR_PRINTF  printf  // 使用标准printf
#endif

//========================================================================
//                          兼容性配置
//========================================================================

// 类型定义（如果项目已有，注释掉）
#define _TYPE_DEF_DEFINED_  1  // 标记已定义类型

#endif /* __TASK_MONITOR_CONFIG_H_ */

