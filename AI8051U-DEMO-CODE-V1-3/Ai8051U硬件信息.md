# Ai8051U 硬件信息

## GPIO

1. **可用数量**：最多可达46个GPIO
   - P0.0~P0.7、P1.0~P1.7、P2.0~P2.7、P3.0~P3.7、P4.0~P4.7、P5.0~P5.3、P5.6~P5.7

2. **工作模式**：所有的GPIO均支持如下4种模式
   - 准双向口模式
   - 强推挽输出模式
   - 开漏模式
   - 高阻输入模式

3. **上电状态**：除P3.0和P3.1外，其余所有I/O口上电后的状态均为高阻输入状态，用户在使用I/O口时必须先设置I/O口模式

4. **上下拉电阻**：每个I/O均可独立使能内部10KΩ上拉电阻和10KΩ下拉电阻

---

## 模拟外设

### ADC（模数转换器）
- **超高速ADC**，支持12位高精度15通道（通道0~通道14）的模数转换
- ADC的通道15用于测试内部参考电压（芯片在出厂时，内部参考电压调整为1.19V，误差±1%）

### 比较器
- 一组比较器

---

## 数字外设

### 定时器
1. **6个16位定时器**：定时器0、定时器1、定时器2、定时器3、定时器4、定时器11
   - 定时器0的模式3具有NMI（不可屏蔽中断）功能
   - 定时器0和定时器1的模式0为16位自动重载模式
   - 定时器11：可选时钟源

### 串口通信
2. **2个高速同步/异步串口**：串口1（USART1）、串口2（USART2）
   - 波特率时钟源最快可为FOSC/4
   - 支持模式：
     - 同步串口模式
     - 异步串口模式
     - SPI模式
     - LIN模式
     - 红外模式（IrDA）
     - 智能卡模式（ISO7816）

3. **2个高速异步串口**：串口3、串口4
   - 波特率时钟源最快可为FOSC/4
   - 2组高级PWM，可实现8通道（4组互补对称）带死区控制的PWM，并支持外部异常检测功能

### PWM模块
4. **3组16位CCP/PCA/PWM模块**：CCP0、CCP1、CCP2
   - 可用于捕获、高速脉冲输出，及6/7/8/10位的PWM输出

### 通信接口
5. **SPI**：3组硬件SPI（一组独立SPI，两组USART的SPI模式）
   - 支持主机模式和从机模式以及主机/从机自动切换
   - 注：3组SPI均支持DMA

6. **QSPI**：支持单线、双线和四线模式

7. **I²C**：支持主机模式和从机模式

### 其他外设
8. **ICE**：硬件支持仿真

9. **RTC（实时时钟）**：支持年、月、日、时、分、秒、次秒（1/128秒），并支持时钟中断和一组闹钟

10. **USB**：USB2.0/USB1.1兼容全速USB
    - 6个双向端点
    - 支持4种端点传输模式（控制传输、中断传输、批量传输和同步传输）
    - 每个端点拥有64字节的缓冲区

11. **I²S**：音频总线

12. **MDU32**：硬件32位乘除法器（包含32位除以32位、32位乘以32位）

13. **TFPU**：单精度浮点运算器
    - 支持浮点加、减、乘、除以及正弦、余弦、正切和反正切等运算

### I/O口中断
14. 所有的I/O均支持中断，每组I/O中断有独立的中断入口地址

15. **中断模式**：所有的I/O中断可支持4种中断模式
    - 高电平中断
    - 低电平中断
    - 上升沿中断
    - 下降沿中断
    - I/O口中断可以进行掉电唤醒，且有4级中断优先级

### LCD驱动模块
16. 支持8080和6800两种接口以及8位和16位数据宽度

### DMA
17. **支持的DMA传输模式**：
    - SPI移位接收数据到存储器
    - SPI移位发送存储器的数据
    - I²C发送存储器的数据
    - I²C接收数据到存储器
    - 串口1/2/3/4接收数据到存储器
    - 串口1/2/3/4发送存储器的数据
    - ADC自动采样数据到存储器（同时计算平均值）
    - LCD驱动发送存储器的数据
    - 存储器到存储器的数据复制

### 硬件数字ID
18. 支持32+32字节

---

## 中断

### 中断源
- **外部中断**：INT0、INT1、INT2、INT3、INT4
- **定时器中断**：定时器0、定时器1、定时器2、定时器3、定时器4
- **串口中断**：USART1、USART2、UART3、UART4
- **ADC中断**：ADC模数转换
- **其他中断**：LVD低压检测、SPI、I²C、比较器、PWMA、PWMB、USB、TFT彩屏接口中断、RTC实时时钟
- **I/O中断**：所有的I/O中断（8组）
- **DMA中断**：
  - 串口1/2/3/4的DMA接收和发送中断
  - I²C的DMA接收和发送中断
  - SPI的DMA中断
  - ADC的DMA中断
  - LCD驱动的DMA中断
  - 存储器到存储器的DMA中断

### 中断优先级
提供4级中断优先级

---

## 复位

### 硬件复位
1. **上电复位**：复位电压值为1.7V~1.9V（在芯片未使能低压复位功能时有效）

2. **复位脚复位**：
   - 出厂时P4.7默认为I/O口
   - ISP下载时可将P4.7管脚设置为复位脚
   - 注意：当设置P4.7管脚为复位脚时，复位电平为低电平

3. **看门狗溢出复位**

4. **低压检测复位**：提供4级低压检测电压
   - 2.0V
   - 2.4V
   - 2.7V
   - 3.0V

### 软件复位
1. 软件方式写复位触发寄存器

---

## 时钟控制

### 内部高精度、高稳定的高速IRC
ISP编程时可进行上下调整

- **误差**：±0.3%（常温下25°C）
- **温漂范围**：
  - -1.35%~+1.30%（全温度范围，-40°C~85°C）
  - -0.76%~+0.98%（温度范围，-20°C~65°C）

### 内部32KHz低速IRC
为了低功耗，省去了温度补偿和电压补偿电路，误差较大

### 外部时钟源
- 外部晶振（4MHz~42MHz）和外部时钟
- 有专门的外部时钟防干扰内部电路，可软件启动

### 内部PLL输出时钟
- PLL输出的144MHz/96MHz可独立作为高速PWM和高速SPI的时钟源
- 用户可自由选择上面的4种时钟源

**注意**：
- 内部PLL输出时钟频率最高可达144MHz/148MHz
- 若高速PWM使用PLL作为时钟源：
  - 125°C时建议高速PWM的输入时钟控制在138MHz以下
  - 105°C时高速PWM的输入时钟可用144MHz

### 芯片上电工作过程
上电复位/复位脚复位/看门狗复位/低压检测复位时，芯片默认从ISP系统程序开始执行代码，此时固定使用内部24MHz的高速IRC时钟。当需要下载用户程序且下载完成后复位到用户程序区或者不需要下载直接复位到用户程序区时，默认会使用上次用户下载时所调节的高速IRC时钟。

如果用户程序需要使用外部高速晶振、外部32.768KHz晶振或者内部30KHz低速IRC，则需要用户软件先启动相应的时钟，然后通过设置CLKSEL寄存器进行切换。

---

## SRAM

**共34K字节**

- 2K字节内部SRAM（edata）
- 32K字节内部扩展RAM（内部xdata）

---

## Flash存储器

### 程序存储器
- **容量**：最大64K字节FLASH程序存储器（ROM），用于存储用户代码

### DATA FLASH/EEPROM
- 支持用户可配置部分FLASH作为DATA FLASH/EEPROM使用
- **擦除单位**：512字节单页擦除
- **擦除次数**：典型单个扇区擦除次数可达10万次，用户保守可当2万次使用

### 下载方式
- 支持硬件USB直接下载和普通串口下载

### 数据保持时间
- 100年 @ 25°C
- 20年 @ 105°C
- 10年 @ 125°C

**说明**：由于汽车及单片机的平均温度不可能长时间大于105°C，从严考虑，Flash数据保持时间可达20年以上，不保证100年。

---

## 内核

- 超高速32位8051内核（1T）
- 4级中断优先级
- 支持在线仿真
- 最高工作频率可达120MHz

---

## 工作电压

**1.9V~5.5V**

**注意**：当工作温度低于-40°C时，工作电压不得低于3.0V

---

## 其它

### 封装与I/O
常见封装为LQFP48，最多可提供46个GPIO

### 内部集成
内部集成高精度RC时钟和复位电路，可节省外部元件

### 低功耗模式
支持IDLE和STOP两种低功耗模式

### 编译器
支持Keil C51（8位模式）和 Keil C251（32位模式）

### ISP工具
STC官方提供的AIapp-ISP软件

### 管脚兼容性
一个非常实用的特点是，AI8051U（LQFP48封装）在管脚上与一些经典的8051芯片（如ST89C52RC）兼容

